{"version":3,"file":"triangles.js","sources":["../../../src/js/houdini/triangles.js"],"sourcesContent":["/* ! Based on https://generativeartistry.com/tutorials/triangular-mesh/ by maxwellito */\n/* global registerPaint */\nregisterPaint(\n  'triangles',\n  class {\n    /**\n     * @return {Array}\n     */\n    static get inputProperties() {\n      return ['--paint-alpha', '--base-hue', '--size', '--max-saturation', '--max-lightness'];\n    }\n\n    /**\n     *\n     * @param {DrawingContext} ctx - 2D Drawing Context for the box\n     * @param {object} size - Size of the box\n     * @param {object} props - Input properties\n     */\n    paint(ctx, size, props) {\n      const color = props.get('--base-hue');\n      const maxS = props.get('--max-saturation');\n      const maxL = props.get('--max-lightness');\n      const gap = parseFloat(props.get('--size'));\n      const alpha = props.get('--paint-alpha');\n\n      ctx.globalAlpha = alpha;\n\n      ctx.scale(1, 1);\n\n      ctx.lineJoin = 'bevel';\n      let line;\n      let dot;\n      let odd = false;\n      const lines = [];\n\n      for (let y = -gap; y <= size.height + 1.4 * gap; y += gap) {\n        odd = !odd;\n        line = [];\n        for (let x = -gap; x <= size.width + 1.4 * gap; x += gap) {\n          dot = { x: x + (odd ? gap / 2 : 0), y: y };\n          line.push({\n            x: x + (Math.random() * 0.8 - 0.4) * gap + (odd ? gap / 2 : 0),\n            y: y + (Math.random() * 0.8 - 0.4) * gap,\n          });\n          ctx.beginPath();\n          ctx.arc(dot.x, dot.y, 1, 0, 2 * Math.PI, true);\n        }\n        lines.push(line);\n      }\n\n      let dotLine;\n      odd = true;\n\n      for (let y = 0; y < lines.length - 1; y++) {\n        odd = !odd;\n        dotLine = [];\n        for (let i = 0; i < lines[y].length; i++) {\n          dotLine.push(odd ? lines[y][i] : lines[y + 1][i]);\n          dotLine.push(odd ? lines[y + 1][i] : lines[y][i]);\n        }\n        for (let i = 0; i < dotLine.length - 2; i++) {\n          this.drawTriangle(ctx, dotLine[i], dotLine[i + 1], dotLine[i + 2], color, maxS, maxL);\n        }\n      }\n    }\n\n    /**\n     *\n     * @param {DrawingContext} ctx - 2D Drawing Context\n     * @param {object} a - Point A\n     * @param {object} b  - Point b\n     * @param {object} c  - Point C\n     * @param {number} h - Hue\n     * @param {number} ms - Maximum Saturation\n     * @param {number} ml - Maximum Lightness\n     */\n    drawTriangle(ctx, a, b, c, h, ms, ml) {\n      ctx.beginPath();\n      ctx.moveTo(a.x, a.y);\n      ctx.lineTo(b.x, b.y);\n      ctx.lineTo(c.x, c.y);\n      ctx.lineTo(a.x, a.y);\n      ctx.closePath();\n      const s = Math.random() * ms;\n      const l = Math.random() * ml;\n      ctx.fillStyle = `hsl(${h}, ${s}%, ${l}%)`;\n      ctx.fill();\n      ctx.stroke();\n    }\n  },\n);\n"],"names":["registerPaint","paint","ctx","size","props","color","get","maxS","maxL","gap","parseFloat","alpha","line","dot","globalAlpha","scale","lineJoin","odd","lines","y","height","x","width","push","Math","random","beginPath","arc","PI","dotLine","length","i","drawTriangle","a","b","c","h","ms","ml","moveTo","lineTo","closePath","s","l","fillStyle","fill","stroke"],"mappings":"AAEAA,cACE,YACA,yCAKW,CAAC,gBAAiB,aAAc,SAAU,mBAAoB,mBASvEC,MAAMC,EAAKC,EAAMC,SACTC,EAAQD,EAAME,IAAI,cAClBC,EAAOH,EAAME,IAAI,oBACjBE,EAAOJ,EAAME,IAAI,mBACjBG,EAAMC,WAAWN,EAAME,IAAI,WAC3BK,EAAQP,EAAME,IAAI,qBAOpBM,EACAC,EANJX,EAAIY,YAAcH,EAElBT,EAAIa,MAAM,EAAG,GAEbb,EAAIc,SAAW,YAGXC,GAAM,QACJC,EAAQ,OAET,IAAIC,GAAKV,EAAKU,GAAKhB,EAAKiB,OAAS,IAAMX,EAAKU,GAAKV,EAAK,CACzDQ,GAAOA,EACPL,EAAO,OACF,IAAIS,GAAKZ,EAAKY,GAAKlB,EAAKmB,MAAQ,IAAMb,EAAKY,GAAKZ,EACnDI,EAAM,CAAEQ,EAAGA,GAAKJ,EAAMR,EAAM,EAAI,GAAIU,EAAGA,GACvCP,EAAKW,KAAK,CACRF,EAAGA,GAAqB,GAAhBG,KAAKC,SAAiB,IAAOhB,GAAOQ,EAAMR,EAAM,EAAI,GAC5DU,EAAGA,GAAqB,GAAhBK,KAAKC,SAAiB,IAAOhB,IAEvCP,EAAIwB,YACJxB,EAAIyB,IAAId,EAAIQ,EAAGR,EAAIM,EAAG,EAAG,EAAG,EAAIK,KAAKI,IAAI,GAE3CV,EAAMK,KAAKX,OAGTiB,EACJZ,GAAM,MAED,IAAIE,EAAI,EAAGA,EAAID,EAAMY,OAAS,EAAGX,IAAK,CACzCF,GAAOA,EACPY,EAAU,OACL,IAAIE,EAAI,EAAGA,EAAIb,EAAMC,GAAGW,OAAQC,IACnCF,EAAQN,KAAKN,EAAMC,EAAMC,GAAGY,GAAKb,EAAMC,EAAI,GAAGY,IAC9CF,EAAQN,KAAKN,EAAMC,EAAMC,EAAI,GAAGY,GAAKb,EAAMC,GAAGY,QAE3C,IAAIA,EAAI,EAAGA,EAAIF,EAAQC,OAAS,EAAGC,SACjCC,aAAa9B,EAAK2B,EAAQE,GAAIF,EAAQE,EAAI,GAAIF,EAAQE,EAAI,GAAI1B,EAAOE,EAAMC,IAetFwB,aAAa9B,EAAK+B,EAAGC,EAAGC,EAAGC,EAAGC,EAAIC,GAChCpC,EAAIwB,YACJxB,EAAIqC,OAAON,EAAEZ,EAAGY,EAAEd,GAClBjB,EAAIsC,OAAON,EAAEb,EAAGa,EAAEf,GAClBjB,EAAIsC,OAAOL,EAAEd,EAAGc,EAAEhB,GAClBjB,EAAIsC,OAAOP,EAAEZ,EAAGY,EAAEd,GAClBjB,EAAIuC,kBACEC,EAAIlB,KAAKC,SAAWY,EACpBM,EAAInB,KAAKC,SAAWa,EAC1BpC,EAAI0C,UAAa,OAAMR,MAAMM,OAAOC,MACpCzC,EAAI2C,OACJ3C,EAAI4C"}