<!DOCTYPE html><html dir="ltr" lang="en"><head><meta charset="UTF-8"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="ie=edge" http-equiv="X-UA-Compatible"><link href="/manifest.json" rel="manifest"><style>.article--content{margin:0 auto;max-width:calc(80ch + 4rem);padding:2rem}@font-face{font-display:swap;font-family:aller;font-style:normal;font-weight:700;src:url(/fonts/aller/regular.woff2) format("woff2"),url(/fonts/aller/regular.woff) format("woff")}@font-face{font-display:swap;font-family:aller;font-style:italic;font-weight:700;src:url(/fonts/aller/italic.woff2) format("woff2"),url(/fonts/aller/italic.woff) format("woff")}@font-face{font-display:swap;font-family:aller;font-style:normal;font-weight:400;src:url(/fonts/aller/light.woff2) format("woff2"),url(/fonts/aller/light.woff) format("woff")}@font-face{font-display:swap;font-family:aller;font-style:italic;font-weight:400;src:url(/fonts/aller/light-italic.woff2) format("woff2"),url(/fonts/aller/light-italic.woff) format("woff")}:root{--blue-600:#1a73e8;--yellow-200:#fde293;--green-300:#81c995;--grey-900:#202124;--grey-500:#9aa0a6;--grey-100:#f1f3f4;--grey-50:#f8f9fa;--orange-300:#fcad70;--pink-500:#f439a0;--purple-200:#d7aefb;--cyan-400:#4ecde6;--red:#c20030;--black:#202124;--white:#fff}body,h1,html,p{margin:0;padding:0}article,header{display:block}h1{font-size:100%;font-weight:400}html{box-sizing:border-box}*,::after,::before{box-sizing:inherit}code{-webkit-font-feature-settings:"liga","dlig";-moz-font-feature-settings:"liga=1, dlig=1";-moz-font-feature-settings:"liga","dlig";-ms-font-feature-settings:"liga","dlig";-o-font-feature-settings:"liga","dlig";font-feature-settings:"liga","dlig";font-family:dm,monospace}:root{font-family:aller,sans-serif;font-size:100%;letter-spacing:.03125em;line-height:1.5}body :not(script)+*{margin-top:1em}a{color:#c20030}h1{font-family:inherit;line-height:1}h1{font-size:6rem;letter-spacing:-.015625em}code{-webkit-font-feature-settings:"liga","dlig";-moz-font-feature-settings:"liga=1, dlig=1";-moz-font-feature-settings:"liga","dlig";-ms-font-feature-settings:"liga","dlig";-o-font-feature-settings:"liga","dlig";font-feature-settings:"liga","dlig";font-family:dm,monospace}p code{background-color:var(--grey-100);border-radius:3px;padding:.2em .5em}html{height:100%}body{background-color:#f8f7f2;display:grid;grid-template-rows:1fr auto;min-height:100%}.article--heading{--paint-alpha:.2;--base-hue:25;--max-saturation:30;--max-lightness:80;--size:125;background-color:hsl(var(--base-hue),100%,30%);background-image:paint(triangles);align-items:center;background-image:paint(triangles),linear-gradient(to bottom right,#c20030,#da9400);border-bottom:.5px solid rgba(0,0,0,var(--paint-alpha));box-sizing:border-box;color:var(--white);display:flex;flex-wrap:wrap;font-weight:700;height:57.14286vh;justify-content:flex-end;text-align:right;text-rendering:optimizeLegibility}.article--title{text-shadow:0 -.005em #111,-.005em 0 #111,-.005em -.01em #111,-.01em -.005em #111,-.01em -.015em #111,-.015em -.01em #111,-.015em -.02em #111,-.02em -.015em #111,-.02em -.025em #111,-.025em -.02em #111,-.025em -.03em #111,-.03em -.025em #111,-.03em -.035em #111,-.035em -.03em #111,-.035em -.04em #111,-.04em -.035em #111,-.04em -.045em #111,-.045em -.04em #111,-.045em -.05em #111,-.05em -.045em #111,-.05em -.055em #111,-.055em -.05em #111,-.055em -.06em #111,-.06em -.055em #111,-.06em -.065em #111,-.065em -.06em #111,-.065em -.07em #111,-.07em -.065em #111,-.07em -.075em #111,-.075em -.07em #111;font-size:calc(2em + 6vw);font-weight:700;padding:2rem;word-wrap:break-word}.article--content{font-size:125%}</style><link href="/css/style.css" rel="stylesheet" media="print" onload="this.media='all'"><link href="/fonts/aller/light.woff2" rel="preload" type="font/woff2" as="font" crossorigin=""><link href="/fonts/aller/regular.woff2" rel="preload" type="font/woff2" as="font" crossorigin=""><link href="/css/dank-mono.css" rel="stylesheet" media="print" onload="this.media='all'"><script defer="" src="/js/main.js" type="module"></script><link href="/images/icons/icon72.png" rel="icon" type="image/png"><link href="/images/icons/icon192.png" rel="apple-touch-icon"><meta content="#008673" name="theme-color"><title>Setting up a Chrome OS Development Environment | Snugug</title><meta content="After joining Google, I was given a Google Pixelbook as my main computer. This is my journey to get it set up for web development
" name="Description"><meta content="zIeV2B7zZKCtEFP-6vV8rKk0ocpbp035v_g3IRn12Jo" name="google-site-verification"></head><body><div class="_wrapper"><div class="_blog"><main class="_blog--article" itemscope="" itemtype="http://schema.org/Blog"><article class="article"><header class="article--heading"><h1 class="article--title" itemprop="name">Setting up a Chrome OS Development Environment</h1></header><div class="article--content base" itemprop="text"><p><em>Disclaimer: I now work for Google, and while this post is about me setting up my work Google Pixelbook, these are my personal thoughts and not Google’s.</em></p><p>So, like the introduction says, I just joined Google! My first order of business, clearly, was getting my new Pixelbook set up to do some webdev on it. Now, being most comfortable developing on a Mac, I immediately reached for the Terminal which… wasn’t there. I thought I was stuck, knowing that I’m most comfortable developing when I’m zooming around in <code>zsh</code>, but then a coworker helped me get <a href="https://www.reddit.com/r/Crostini/" rel="noopener">Crostini</a> set up. This is the key to being a happy web developer (or probably most any developer) on Chrome OS.</p><p>Crostini, also known as Linux on Chrome OS, will actually let you run a Linux container (or maybe virtual machine? Not entirely sure ) on your Chromebook. This means that, currently (Chrome OS 70), once you’ve gotten it installed, you’ll get a Debian container and a terminal ready to go! Poking around the subreddit above it <em>appears</em> that you can install other containers, but Debian works well for me.</p><p>With the Debian install, you don’t get an actual Linux desktop, like you would with say a Virtual Box VM. Instead, you get something much more interesting; after getting set up, the Linux environment for all intents and purposes <em>feels</em> like a fully integrated part of the OS! There’s a <code>Linux files</code> folder in the Files app that puts stuff directly in to the container, and the native Chrome can access the container’s <code>localhost</code> (or <code>penguin.linux.test</code>, if you’re feeling cool). With my Linux container set up, the next for me was setting up a development environment that felt familiar to me coming from a Mac. For me, that first step was replacing the terminal that comes with Crostini with a new one, because I wanted to full control over customizing the look, feel, and shortcuts of my terminal.</p><section><h2 id="terminal-setup"><a href="#terminal-setup" class="header-anchor">¶</a> Terminal Setup</h2><p>After a bunch of playing around for a good terminal replacement, I stumbled upon a <a href="https://www.reddit.com/r/Crostini/comments/8rgq26/multi_tabs_in_terminal/e29vjqr/" rel="noopener">Reddit thread</a> that help me install <a href="https://gnunn1.github.io/tilix-web/" rel="noopener">Tilix</a>. I was looking for a good <a href="https://www.iterm2.com/" rel="noopener">iTerm 2</a> replacement, and this comes really close! The key bits from that thread, to get Tilix running, are as follows:</p><pre class="language-bash"><code class="language-bash">$ <span class="token builtin class-name">echo</span> <span class="token string">'deb http://ftp.debian.org/debian stretch-backports main'</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/stretch-backports.list
$ <span class="token function">sudo</span> <span class="token function">apt</span> update
$ <span class="token function">sudo</span> <span class="token function">apt</span> -y <span class="token function">install</span> tilix
$ <span class="token function">sudo</span> <span class="token function">ln</span> -s /etc/profile.d/vte-2.91.sh /etc/profile.d/vte.sh
</code></pre><p>This will add Stretch Backports as an <code>apt</code> source, update the <code>apt</code> source, and install Tilix. The last line symlinks <code>vte.sh</code> so Tilix can use it. The final thing you need to do is source that in your <code>.bashrc</code> or <code>.zshrc</code> file.</p><pre class="language-bash"><code class="language-bash"><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$TILIX_ID</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span> <span class="token variable">$VTE_VERSION</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">source</span> /etc/profile.d/vte.sh
<span class="token keyword">fi</span>
</code></pre><p>With that set up, Tilix became launchable from the Chrome OS launcher and pinnable!</p><p>Next, I wanted to use <code>zsh</code> instead of <code>bash</code>. I love <a href="https://github.com/robbyrussell/oh-my-zsh" rel="noopener">Oh My Zsh</a>, which is an open source <code>zsh</code> configuration management framework, so I went to work installing that. Installation is a fairly straight forward, simply run <code>sudo apt-get install zsh wget</code> and we had <code>zsh</code>! We also install <code>wget</code> here because it doesn’t come with our Linux container, and then use that to follow the standard <em>Oh My Zsh</em> install instructions. I also recommend using the <a href="https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins/z" rel="noopener">z</a>, <a href="https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins/shrink-path" rel="noopener">shrink-path</a>, and <a href="https://github.com/zsh-users/zsh-syntax-highlighting" rel="noopener">zsh-syntax-highlighting</a> <code>zsh</code> plugins; they’re real productivity and quality-of-life enhancements for my terminal.</p><p>Finally, it’s time to edit settings for Tilix! Open Tilix, click the top-left icon, and hit Preferences. From there, either edit the Default profile, or create a new one, go to the <em>Command</em> tab, check <code>Run a custom command instead of my shell</code>, and under the command, type <code>zsh</code>. This will make Tilix run <code>zsh</code>! Then, go ahead and customize both the terminal and <code>zsh</code> to your liking!</p><p>While you’re in Tilix preferences, you should play around with the shortcuts they provide. I like app-like shortcuts, like <code>CTRL+C</code>/<code>CTRL+V</code> for copy/paste, so go ahead and change those yo our heart’s content</p><p>One last bit that may come in handy; if you’re using a <code>zsh</code> theme that makes use of <a href="https://github.com/powerline/fonts" rel="noopener">Powerline fonts</a> (like I do), you’ll need do a little bit extra to get them installed. After downloading the fonts I wanted, I followed another <a href="https://www.reddit.com/r/Crostini/comments/9ih3nv/installing_fonts/" rel="noopener">Reddit thread</a> to install the fonts I need. The steps are:</p><ol><li>Create a folder named <code>.fonts</code> in the home (<code>~</code>) directory</li><li>Copy the font files to install into that folder</li><li>Run <code>fc-cache -fv</code> to verbosely force the cache to rebuild.</li></ol><p>Once done, go back in to your profile under Tilix preferences and use the newly installed fonts!</p></section><section><h2 id="web-development-environment"><a href="#web-development-environment" class="header-anchor">¶</a> Web Development Environment</h2><p>With the terminal squared away, it’s now time to set up a web dev environment! The first thing on my list was installing a better text editor. It turns out that <a href="https://code.visualstudio.com/" rel="noopener">Visual Studio Code</a> not only is available for Debian, but it runs <em>beautifully</em> on our new setup! Download the <code>.deb</code> file from their site, save it to the Linux files folder, and then from your terminal, in the folder you downloaded the <code>.deb</code> file, run <code>sudo dpkg -i visual-studio-install-filename.deb</code>, replacing the last bit with the actual filename. That’s it! You’ve got full VS Code now!</p><p>The final bit I really need is a Node environment. Instead of installing Node directly, I prefer using <a href="https://github.com/creationix/nvm" rel="noopener">NVM</a> (Node Version Manager) coupled with <a href="https://github.com/wbyoung/avn" rel="noopener">AVN</a> (Automatic Version Switching for Node). The installation instructions that are provided for both work wonders. The only caution I have here that you need to install NVM <em>and</em> a version of Node <em>before</em> installing AVN because AVN requires a Node install. With both installed, the bottom of my <code>~/.zshrc</code> file looks like this:</p><pre class="language-bash"><code class="language-bash"><span class="token comment"># Node Version Manager and ANV</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">NVM_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/.nvm"</span>
<span class="token punctuation">[</span> -s <span class="token string">"<span class="token variable">$NVM_DIR</span>/nvm.sh"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>. <span class="token string">"<span class="token variable">$NVM_DIR</span>/nvm.sh"</span>  <span class="token comment"># This loads nvm</span>
<span class="token punctuation">[</span> -s <span class="token string">"<span class="token variable">$NVM_DIR</span>/bash_completion"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>. <span class="token string">"<span class="token variable">$NVM_DIR</span>/bash_completion"</span>  <span class="token comment"># This loads nvm bash_completion</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span> -s <span class="token string">"<span class="token environment constant">$HOME</span>/.avn/bin/avn.sh"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">source</span> <span class="token string">"<span class="token environment constant">$HOME</span>/.avn/bin/avn.sh"</span> <span class="token comment"># load avn</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">"/usr/local/bin:<span class="token environment constant">$PATH</span>"</span>
</code></pre><p>I also enable the <code>node</code>, <code>npm</code>, and <code>nvm</code> plugins for <code>zsh</code>.</p></section><section><h2 id="migrating-from-a-mac"><a href="#migrating-from-a-mac" class="header-anchor">¶</a> Migrating from a Mac</h2><p>If you’re coming from a Mac, one of the biggest pain points I found was the keyboard and trackpad are, by default, set up to mimic Windows. This can be resolved in settings, though! From the App Launcher, open Settings, then navigate (from the hamburger menu) to <strong>Device</strong>. Under <strong>Touchpad</strong>, you can set scrolling to <code>Australian</code>, or natural scrolling in the Mac world, and under <strong>Keyboard</strong>, swap the <code>Ctrl</code> and <code>Alt</code> keys. If you wind up constantly hitting the Google Assistant button in between the keyboard’s <code>Ctrl</code> and <code>Alt</code> keys like I do, unfortunately that can’t be remapped as of this writing, so the only way to stop that is by disabling Google Assistant entirely. I think that if and when that can be remapped, I’ll probably re-enable Assistant and assign it to the <code>Ctrl</code> key, and have the assistant key be the new <code>Alt</code> (so <code>Alt</code> key === <code>Ctrl</code>, Assistant key === <code>Alt</code>, <code>Ctrl</code> key === Assistant, as opposed to Assistant key being disabled now, and <code>Ctrl</code> key === <code>Alt</code> currently). Finally, under <strong>Displays</strong>, you can change the Internal Display size. I set mine so it looks like <code>1500 x 1000</code> which is closest to my previous Mac’s <code>1440 x 900</code> display. Change this to your liking.</p><p>The last thing that may be missing are some familiar and useful CLI commands; specifically, the <code>open</code> command, and <code>pbcopy</code>/<code>pbpaste</code>. They aren’t natively available in Debian, so we’ll need to roll our own.</p><p>To tackle <code>open</code>, in <code>~/.zshrc</code>, add the following function:</p><pre class="language-bash"><code class="language-bash"><span class="token function-name function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  setsid <span class="token function">nohup</span> <span class="token function">xdg-open</span> <span class="token variable">$1</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> /dev/null
<span class="token punctuation">}</span>
</code></pre><p>This will open whatever file or folder name is passed in, in the default application, in a new, effectively detached session, emulating how OSX’s <code>open</code> command works.</p><p>For <code>pbcopy</code> and <code>pbpaste</code> (copying to and pasting from the clipboard), I followed <a href="https://www.ostechnix.com/how-to-use-pbcopy-and-pbpaste-commands-on-linux/" rel="noopener">an article</a> that had me install <code>xclip</code> (<code>sudo apt-get install xclip</code>) and then add the following aliases to my <code>~/.zshrc</code> file:</p><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">alias</span> <span class="token assign-left variable">pbcopy</span><span class="token operator">=</span><span class="token string">'xclip -selection clipboard'</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">pbpaste</span><span class="token operator">=</span><span class="token string">'xclip -selection clipboard -o'</span>
</code></pre><p>There’s also a Linux port of Homebrew called <a href="http://linuxbrew.sh/" rel="noopener">Linuxbrew</a> which looks interesting, but I haven’t investigated it yet.</p></section><section><h2 id="final-thoughts"><a href="#final-thoughts" class="header-anchor">¶</a> Final Thoughts</h2><p>I consider myself somewhat of a power Mac user so getting my new Pixelbook set up to my liking is a <em>must</em> in order for me to feel comfortable using it. There are still some gaps; I’d like to be able to change all of the global keyboard shortcuts (specifically, missing <code>CMD+Tab</code> to move through applications and <code>CMD+~</code> to move through application windows, the equivelant here would be <code>Ctrl</code> instead of <code>CMD</code>), and while the Pixelbook has great mouse-centric window snapping, I’m really missing keyboard shortcuts for window sizing and placement, like with <a href="http://mizage.com/divvy/" rel="noopener">Divvy</a> or <a href="https://www.spectacleapp.com/" rel="noopener">Spectacle</a>. I’m also missing multitouch gestures, which I use extensively and extensively customize with <a href="https://folivora.ai/" rel="noopener">BetterTouchTool</a>.</p><p>There’s also another issue I’ve run in to though; the death by a thousand papercuts of tools you’re likely use to or dependent on that don’t have great web-based or Linux, like the Adobe suite, Sketch, <a href="https://1password.com/" rel="noopener">1Password</a>, and other Mac and/or Windows-centric desktop apps. Some of these have Android alternatives that can be installed through the Play store on Chrome OS, but for many, you’ll just need to go without for now.</p><p>On the other hand, <a href="https://developers.google.com/web/progressive-web-apps/" rel="noopener">Progressive Web Apps</a> are treated as <em>fabulous</em> first-class citizens on Chrome OS, with you being able to install them and have them be treated, for all intents and purposes, as any other app. <a href="https://mobile.twitter.com" rel="noopener">Twitter’s PWA</a>, for example, works great installed. Because of how well these work, and the progress with which <a href="https://webassembly.org/" rel="noopener">WebAssembly</a> is coming along, I can see a future in which some of these desktop apps are able to be ported to the web and installed as a PWA, but I think that ma still be a bit far off for now.</p></section><footer class="article--author"><span class="article--published" itemprop="datePublished">Published on <time datetime="Invalid Date">October 30, 2018</time></span></footer></div></article></main></div></div><!--#include virtual="/_components/nav.txt"--><footer class="footer"><nav><ul><li><a href="/">Home</a></li><li><a href="/me/">About Me</a></li><li><a href="/cookbook/">Cookbook</a></li><li><a href="/musings/">Musings</a></li><li><a href="/presentations/">Presentations</a></li></ul></nav></footer><!--#endinclude--><script>(function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        (i[r] =
          i[r] ||
          function() {
            (i[r].q = i[r].q || []).push(arguments);
          }),
          (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

      ga('create', 'UA-30577396-1', 'auto');
      ga('send', 'pageview');</script><noscript><link href="/css/style.css" rel="stylesheet"></noscript><noscript><link href="/css/dank-mono.css" rel="stylesheet" media="print" onload="this.media='all'"></noscript></body></html>