<!DOCTYPE html>
<html lang="en" class="astro-MPDYEVQB">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="stylesheet" href="/fonts/dank-mono.css">
    <link rel="me" href="https://mas.to/@snugug">
    <link rel="manifest" href="/manifest.webmanifest">
    <meta name="generator" content="Astro v1.6.15">
    <title>Override Theme Functions from Drupal 7 Module | Snugug</title>
    <meta name="description" content="Ever need to really override a core or contrib module's theme output? You won't believe what you can do with this one weird hook!">
  <link rel="stylesheet" href="/assets/cookbook.afd1d160.css" />
<link rel="stylesheet" href="/assets/cookbook.65b8ab6f.css" />
<link rel="stylesheet" href="/assets/_slug_.b6836d49.css" /></head>
  <body class="body astro-MPDYEVQB">
    <style>astro-island,astro-slot{display:contents}</style><script>(self.Astro=self.Astro||{}).load=a=>{(async()=>await(await a())())()},window.dispatchEvent(new Event("astro:load"));var l;{const c={0:t=>t,1:t=>JSON.parse(t,o),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,o)),5:t=>new Set(JSON.parse(t,o)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(JSON.parse(t)),9:t=>new Uint16Array(JSON.parse(t)),10:t=>new Uint32Array(JSON.parse(t))},o=(t,s)=>{if(t===""||!Array.isArray(s))return s;const[e,n]=s;return e in c?c[e](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(l=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=()=>{if(!this.hydrator||this.parentElement&&this.parentElement.closest("astro-island[ssr]"))return;const s=this.querySelectorAll("astro-slot"),e={},n=this.querySelectorAll("template[data-astro-template]");for(const r of n){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(const r of s){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("name")||"default"]=r.innerHTML)}const a=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),o):{};this.hydrator(this)(this.Component,a,e,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),window.removeEventListener("astro:hydrate",this.hydrate),window.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((s,e)=>{e.disconnect(),this.childrenConnectedCallback()}).observe(this,{childList:!0})}async childrenConnectedCallback(){window.addEventListener("astro:hydrate",this.hydrate);let s=this.getAttribute("before-hydration-url");s&&await import(s),this.start()}start(){const s=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(Astro[e]===void 0){window.addEventListener(`astro:${e}`,()=>this.start(),{once:!0});return}Astro[e](async()=>{const n=this.getAttribute("renderer-url"),[a,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),i=this.getAttribute("component-export")||"default";if(!i.includes("."))this.Component=a[i];else{this.Component=a;for(const d of i.split("."))this.Component=this.Component[d]}return this.hydrator=r,this.hydrate},s,this)}attributeChangedCallback(){this.hydrator&&this.hydrate()}},l.observedAttributes=["props"],l))}</script><astro-island uid="ZJ6d3u" component-url="/Menu.ecc8f48d.js" component-export="default" renderer-url="/client.05ab6769.js" props="{&quot;class&quot;:[0,&quot;astro-MPDYEVQB&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;Menu&quot;,&quot;value&quot;:true}" await-children=""><div><button class="toggle svelte-lkm16t" aria-expanded="false" aria-label="Open menu"></button>

  <nav class="menu svelte-lkm16t" aria-expanded="false"><ul class="menu--list svelte-lkm16t"><li><a href="/" tabindex="-1">Home</a></li>
      <li><a href="/musings" tabindex="-1">Posts</a></li>
      <li><a href="/cookbook" tabindex="-1">Cookbook</a></li>
      <li><a href="/me" tabindex="-1">About</a></li>
      <li><a href="/presentations" tabindex="-1">Presentations</a></li>
      <li><a href="/rss.xml" tabindex="-1">RSS</a></li></ul></nav>
</div></astro-island>

    <div class="body-content astro-MPDYEVQB">
      <main itemscope="" itemtype="http://schema.org/Blog" class="astro-HRZLV7RA">
    <article class="article astro-HRZLV7RA">
      <header class="article--heading astro-HRZLV7RA">
        <div class="heading heading--padded astro-O3TATT2D" style="--hue: 25;--saturation: 30;--lightness: 80;--alpha: 0.2;--size: 125;">
  <h1 class="heading--title astro-O3TATT2D" itemprop="name">Override Theme Functions from Drupal 7 Module</h1>
</div>


      </header>
      <div class="article--container astro-HRZLV7RA">
        <div class="article--inner astro-HRZLV7RA">
          <p class="article--date astro-HRZLV7RA">
            
            <time datetime="2012-08-05T00:00:00.000Z" class="astro-HRZLV7RA">8/5/2012
            </time>
          </p>
          <div class="article--content type astro-HRZLV7RA"><p>Have you ever really, truly hated the theme output of Drupal core or contrib module and really wanted to override it? In your theme function, it’s easy enough, <code>function YOURTHEME_themename($vars)</code>. That’s all fine and dandy, but what if you really want to do it from a module, like, say, if you’re creating a <a href="http://drupal.org/project/borealis">responsive image solution</a> and need to add a noscript fallback? Well, I can now tell you that yes you can! It’s as simple as one overlooked hook and, well, writing you own function! Let’s take a look at how.</p>
<p>This whole thing boils down to one hook, <a href="http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_theme_registry_alter/7"><code>hook_theme_registry_alter</code>
</a>. The hook is pretty simple, it goes a little something like this:</p>
<figure><pre class="language-php"><code class="language-php"><span class="token doc-comment comment">/**
 * Implements hook_theme_registry_alter
 */</span>
<span class="token keyword">function</span> <span class="token function-definition function">mymodule__theme_registry_alter</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token variable">$theme_registry</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token variable">$theme_registry</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'theme_name'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'theme path'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'path/to/your/module'</span><span class="token punctuation">;</span>
  <span class="token variable">$theme_registry</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'theme_name'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'function'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'mymodule_function_name'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></figure><p><code>'theme_name'</code> is the name of the theme function you want to change, so if you wanted to alter the image style theme, you’d put <pre>‘image_style’</pre> there. The theme path is the path to the module where the function is stored, but not the file itself, so you can plug in the output of <a href="http://api.drupal.org/api/drupal/includes%21common.inc/function/drupal_get_path/7"><code>drupal_get_path()</code></a> directly into it. All of the previous <code>hook_preprocess</code> and <code>hook_process</code> functions that are already written for the theme you’re overriding will still work, so you can happily use this and be compatible with other modules!</p>
<p>A couple of things to note about your custom function. First, you don’t need to write a full theme function to use this, just a plain old function will do as long as it takes the same input as the original function. Second, if you want to use the output of another theme function, especially, say, the one you’re overriding so you can add to its output, you can call the function directly (in the case of image style, you can call <code>php theme_image_style($vars)</code>) and keep on going. And don’t forget to return something!</p>
</div>
        </div>
      </div>
    </article>
  </main>
    </div>

    <script>(self.Astro=self.Astro||{}).only=t=>{(async()=>await(await t())())()},window.dispatchEvent(new Event("astro:only"));</script><astro-island uid="1HCVf6" component-url="/Scripts.e7e8b989.js" component-export="default" renderer-url="/client.05ab6769.js" props="{&quot;class&quot;:[0,&quot;astro-MPDYEVQB&quot;]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;Scripts&quot;,&quot;value&quot;:true}"></astro-island>
    <footer class="footer svelte-1bt7hha"><div class="inner svelte-1bt7hha"><img src="/images/me/square.jpg" alt="Headshot of Sam" class="headshot svelte-1bt7hha" loading="lazy">
    <h2 class="svelte-1bt7hha">Sam <br><span class="aka">aka</span>
      <a class="type--a svelte-1bt7hha" href="/links">Snugug</a></h2>
    <p class="svelte-1bt7hha">BBQ lead, ChromeOS DevRel</p>
    <p class="svelte-1bt7hha">Web, design, development, food</p></div>
</footer>
  
</body></html>

