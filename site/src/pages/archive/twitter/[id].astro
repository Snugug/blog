---
import Tweet from '$components/Tweet.svelte';
import Layout from '$layouts/Twitter.astro';
import Twitter from '$lib/tweetback/twitter';

/**
 * Find all the Twitter tweets
 */
export async function getStaticPaths() {
  return Twitter.tweets.map((tweet) => {
    return {
      params: {
        id: tweet.id,
      },
      props: { ...tweet },
    };
  });
}

const tweet = Astro.props;
const replies = await Twitter.getReplies(tweet.id);
console.log(replies);
---

<Layout title={`Tweet ${tweet?.id}`} summary={tweet?.text} active="tweet">
  <Tweet tweet={tweet} showReplies={true} />
</Layout>
